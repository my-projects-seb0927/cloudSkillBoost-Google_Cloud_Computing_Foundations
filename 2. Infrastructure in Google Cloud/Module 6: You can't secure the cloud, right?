# Module 6: You can't secure the cloud, right?

## 1. Security in the cloud
### Infrastructure security design
- Operational security
- Internet communication
- Storage services
- Service deployment
- Hardware infrastructure

### Hardware infrastructure layer
#### Hardware design and provenance
Both the server boards and the networking equipment in Google data centers are custom designed by Google. Google also designs custom chips, including a hardware security chip that's currently being deployed on both servers and peripherals.

#### Secure boot stack
Google server machines use various technologies to ensure that they are booting the correct software stack, such as cryptographic signatures over the BIOS, bootloader, kernel, and base operating system image.

#### Premises security 
Google designs and builds its own data centers, which incorporate multiple layers of physical security protections.

Google also hosts some servers in third-party data centers, where we ensure that there are Google-controlled physical security measures on top of the security layers provided by the data center operator.

### Deployment layer
#### Encryption of inter-service operator
Google’s infrastructure provides cryptographic privacy and integrity for remote procedure call (“RPC”) data on the network.

#### User identity
Google’s central identity service, which usually manifests to end users as the Google login page, goes beyond asking for a simple username and password.

### Storage services layer
#### Encryption at rest
Most applications at Google access physical storage (in other words, “file storage”) indirectly by using storage services, and encryption (using centrally managed keys) is applied at the layer of these storage services. 

### Internet communication layer
#### Google Front End (GFE)
Google services that want to make themselves available on the internet register themselves with an infrastructure service called the Google Front End, which ensures that all TLS connections are ended using a public-private key pair and an X.509 certificate from a Certified Authority (CA).

#### Denial of Service ("DoS") protection
The sheer scale of its infrastructure enables Google to simply absorb many DoS attacks. Google also has multi-tier, multi-layer DoS protections that further reduce the risk of any DoS impact on a service running behind a GFE.

### Google operational security layer
#### Intrustion detection
Rules and machine intelligence give Google’s operational security teams warnings of possible incidents.

#### Reducing insider risk
Google aggressively limits and actively monitors the activities of employees who have been granted administrative access to the infrastructure.

#### Employee U2F use
To guard against phishing attacks against Google employees, employee accounts require use of U2F-compatible security keys.

#### Software development practices
Google employs central source control and requires two-party review of new code. Google also provides its developers with libraries that prevent them from introducing certain classes of security bugs. Google also runs a Vulnerability Rewards Program where we pay anyone who can discover and inform bugs in the infrastructure. 

> (Note from the author: I'm just shocked with the last sencence **:o**)
> (Note from the author after visiting the website: Really? Just 30.000? I bet an exploit would cost more in the dark web ewe).

##  2. The shared security model
Security responsibilities are shared between the customer and Google Cloud.
Google provides tools like the resource hierarchy and IAM to help them define and implement policies, but ultimately this part is their responsibility. Data access is usually the customer’s responsibility. They control who or what has access to their data. Google Cloud provides tools that help them control this access, such as Identity and Access Management, but they must be properly configured to protect data. 

## 3. Encryption options
![Google Cloud Encryption tools](media/3.png)
It also exists a fourth option: To encrypt data locally before you store it the cloud (Client-side encryption)
![How encryption works](media/4.png)

### Customer-managed encryption keys (CMEK)
- Manage keys in a cloud-hosted solution.
- Encrypt and decrypt via API.
- Automated and at-will key rotation.
- Symmtric and asymmetric key suport.

### Customer-supplied encryption keys (CSEK)
- Customer-supplied encryption keys give users more control over their keys, but with greater management complexity.
- With CSEK, users use their own AES 256-bit encryption keys.
- Users are responsible for storing the keys and providing them as part of Google Cloud API calls.
- Google Cloud will use the provided key to encrypt the data before saving it.  

## 4. Authentication and authorization with IAM
With IAM, administrators can apply policies that define who can do what on which resources.
00:28
The “who” part of an IAM policy can be a Google Account, a Google group, a service account, or Cloud Identity domain. The “can do what” part of an IAM policy is defined by a role


## 5. Lab: User Authentication: Identity-Aware Proxy


## 6. IAM authorization best practies


## 7. Lab: IAM: Qwuik Start


### What is an API?